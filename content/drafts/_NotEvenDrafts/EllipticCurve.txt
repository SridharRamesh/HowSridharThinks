An elliptic curve is something like a homogenous polynomial of degree three in three variables, considered projectively.

Given two distinct roots, there is a unique plane through those roots. The polynomial interpreted on that plane becomes a homogenous polynomial of degree three with essentially variables (as restricted to the plane) with two known roots. A homogenous polynomial in (n + 1) variables acts like a heterogenous polynomial in n variables, so this acts like a degree three polynomial in one variable with two known roots; dividing by the two known roots, we get a third root as well (possibly a duplicate of one of the existing roots, when counted with multiplicity).

In short: from any two distinct roots, there is a third root (counted with multiplicity) in the same plane as them, such that our original polynomial P(x, y, z) can be expressed as P(x, y, z) = Plane(x, y, z) + Plane1(x, y, z) * Plane2(x, y, z) * Plane3(x, y, z) where Plane(x, y, z) is the chosen plane (expressed as a linear polynomial) and Plane1, Plane2, and Plane 3 are three other planes not parallel to Plane (and can be re-expressed mod Plane(x, y,z ) as desired).

...

---------------------------------
Consider any 3 x 3 square of points

A B C
D E F
G H I

If, out of the six rows and columns, at least five comprise triples (of roots of our curve on some plane), then the sixth is a triple as well.

Why is this? This is by the AF + BG theorem \[the AF + BG theorem tells us that adding up any (n + 1) triples and subtracting n triples (where the additions and subtractions are in the free group generated by the points of our curve), leaves us with another triple. Here, each row is the sum of the three columns minus the other two rows, or just as well, each column is the sum of the three rows minus the other two columns\].

Given any P and Q, we denote the third point that fleshes them out into a triple by P # Q. (This is a symmetric but NON-associative operation).

Consider functions of the form x |-> P # x. These functions generate a monoid.

Indeed, each of these functions is an involution (P# takes Q to some third point R of the triple P, Q, R, and then takes that R back to Q), so the monoid they generate is a group.

Furthermore, note that ((x # A) # B) # C = ((x # C) # B) # A, by the following 3x3 square:

x       | A              | (x # A)
C       |                | (x # A) # B
(x # C) | (x # C) # B    | B

The value which fleshes out the middle row into a triple is ((x # A) # B) # C . The value which fleshes out the middle column into a triple is ((x # C) # B) # A. Thus those two values are equal.

This means that in any composition of functions of the sort x |-> P # x, I can swap two of those functions that are at distance two from each other.

This means that in such a composition, we can ARBITRARILY permute the functions at even indices among each other, and ARBITRARILY permute the functions at odd indices among each other.

Furthermore, if a function appears in both an even and an odd index, we can permute to put them next to each other, and then (as an involution) they cancel out.

So the value of such a composition depends ONLY on the number of times each P appears in an even index minus the number of times it appears at an odd index.

Now consider the following 3 x 3 square:

I will temporarily write AB to mean A # B for convenience (note that this is NOT associative):

x          | P  | xP
(PR)Q      | PR | Q
((xP)Q)R   | R  | (xP)Q

All three rows here are obviously triples. The middle and right column are obviously triples. Therefore, the left column must be a triple. Therefore:
x # ((P # R) # Q) = ((x # P) # Q) # R.

Therefore, any three functions of the form x |-> x # Point compose to a single function of this form.

Also, note that if P # x = Q # x for all x, then P = Q, because we would have that Q = P # (P # Q) = Q # (P # Q) = P.

So, any composition of an ODD number of these functions is equivalent to the single function of this sort for a UNIQUE point of our curve.


Thus, there is a map from the free abelian group on the points of the curve into the group of permutations of such points which sends each P to the function x |-> x # P. This induces a quotient of the free abelian group on the points of the curve.

There is also a map from the free abelian group on the points of the curve into Z_2, by sending each point to 1. Of course, the preimage of 0 and the preimage of 1 are in non-canonical bijection here (as we can non-canonically select a point on the curve to give that bijection). Furthermore, any value in the preimage of 1 is canonically equivalent to a unique point of our curve.

USUALLY, it is the case that any element of the free abelian group on the points of the curve which is sent to identity by mapping into the x |-> P # x stuff is also an element which is sent to 0 in Z_2. But even if not, we can still say that the group we are interested in is the image (in x |-> P # x world) of the preimage of 0 (under the map to Z_2), and this is in non-canonical bijection with the image (in x |-> P # x world) of the preimage of 1 (under the map to Z_2), which is in canonical bijection with the points of the curve.

In fact, the above all generalizes like so: Given ANY set S, of which certain size 3 multisets are considered "triples", such that every size 2 multiset is contained in a unique triple, and such that we have the 3x3 square property as above, we can define from it an abelian group in this same way, such that S is a torsor for this group (thus, S and the group are non-canonically in bijection). Conversely, from any abelian group, we get such a system of triples by saying a triple is a set {A, B, C} where A + B + C = 0.

\[Digression: A # B can be thought of as -A - B, or more generally as K - A - B for some constant K. Note that a composite expression built using #s applied to some variables will ultimately be a sum of some coefficients times each variable plus some coefficient times K. The coefficient of K is determined by the other coefficients like so: If x # y is interpreted as K - x - y, and we set K to 3, then 1 # 1 = 1. Thus, inductively, any expression built up using # evaluates to 1 when all variables are interpreted as 1 and K is interpreted as 3. That is to say, the total coefficient of the variables, plus 3 * the coefficient of K, equals 1. Since the coefficient of K is determined by the other coefficients, we find that the universal laws of the operation -A - B in an abelian group are the same as those for the operation K - A - B for a generic K. \]

Note that, if P, Q, R is a triple, and P', Q', R' is a triple, then in this abelian group we have that P + Q + R = P' + Q' + R'. To see this, first we establish this in the case where the triples overlap; that is, take R = R'. To establish P + Q = P' + Q' in this case means establishing the identity (x # P) # Q' = (x # P') # Q, which is seen by the following 3 x 3 square:

x      | P       | x # P
P'     | R = R'  | Q'
x # P' | Q       | result

Now that overlapping triples have been seen to have equal sums, the same also holds for arbitary triples, as from any triples P, Q, R and P', Q', R', we can derive an intermediary triple R, R', R # R' which overlaps with each of them.

----------

Take the free abelian group on the points of the curve. This group comes with a map into Z, which sends every generator to 1. Consider this group quotiented by the relation P + Q + R = 0 whenever P, Q, R are a triple of roots in some plane. Note that the map to Z_3 factors through this quotient.

In the resulting group, each value in the preimage of 1 in Z is equivalent to a unique point of the elliptic curve. 

Why is that? For existence, note the following: For each P and Q, we have that P + Q = -R for R = P # Q. So any addition of two points is equivalent to a subtraction of one point, or any subtraction of two points is equivalent to an addition of one point. Repeating this over and over, every expression for a value in this group is equivalent to some minimal expression which is either en empty sum, or a single point positively, or a single point negatively, or a difference of two points. Out of these, the only ones which map to 1 in Z_3 are a single point positively.

What about uniqueness? It's also a true fact (although proving this will require us to understand the AF + BG theorem) that if P + Q + R = 0 in this group, then P, Q, R are a triple of roots in some plane of our elliptic curve. That is, we have an iff: P, Q, R are a triple of roots of the elliptic curve iff P + Q + R = 0 in this quotiented group.

Therefore, if points P1 and P2 of our curve are equivalent in this group, and P1, Q, R are a triple of coplanar points of our curve, then P2, Q, R is also a triple of coplanar points of our curve, and therefore P1 = P2 as points on our curve. Furthermore, of course, every P1 is part of SOME triple \[pick an arbitrary Q, perhaps even Q = P1 or Q = P2, and then choose R to be P # Q\].

The group we are interested in is the preimage of 0 in Z_3. But this group is in bijection with the preimage of 1 in Z_3, by adding or subtracting O, where O is any particular point of our curve.

Actually, slightly better put than the above is to consider the preimage under 0 of the map to Z sending each generator to 1, rather than the map to Z_3, and to use the quotient under which P + Q + R = P' + Q' + R' for any triples {P, Q, R} amd {P', Q', R'}, rather than sending these more specifically to 0.

-------

To recap what we discussed today:

Given the system of "triples" of points on an elliptic curve, we may define:

A) The monoid of compositions of even numbers of functions of the form "Send x to the unique point x # P such that x, P, and x # P form a triple" for various P. This is obviously a group (as a monoid generated by involutions), and (after non-canonically choosing an origin) the points of the curve obviously inject into this group. However, it is not obvious that this injection is a surjection, and it is not obvious that the group is abelian (those both depend on the AF + BG theorem establishing the 3x3 square property).

B) The divisor class approach: The monoid of formal linear combinations of points with integer coefficients summing to 0, modulo the relation that any two triples sum to the same total. This is obviously an abelian group, and (after non-canonically choosing an origin) the points of the curve obviously surject onto this group. However, it is not obvious that this surjection is an injection (this depends on the AF + BG theorem).

C) The traditional approach: Define P + Q as (P # Q) # Origin for some non-canonically chosen origin point on the curve (often for convenience taken to be such that {Origin, Origin, Origin} is itself a triple, though this is not essential). This is obviously a symmetric operation, with Origin as an identity element, and such that for any two values P and R, there is a unique Q such that P + Q = R. Furthermore, the set this operation acts on is obviously, canonically, indeed definitionally, the points of the curve. However it is not at all obvious that the + operation so defined is associative, and indeed this is a giant pain to think about in this presentation (though again, it comes down to the AF + BG theorem and the 3x3 square property it induces).

Once one has the AF + BG theorem, it becomes clear that all three of these are equivalent.

B is basically the nicest thing here, and the thing that generalizes most usefully to other situations (though the surjectivity and injectivity in it do not generalize). That is the divisor class group concept.

I also have fondness for A, because I came up with it, it’s cute, and I’ve never seen anyone else discuss it. It generalizes to the relationship between abelian groups and “triple systems” we were mulling over.

C is traditional but seems to me the least nice thing to consider, that generalizes to nothing. It’s much nicer to me to think about structures that are automatically assocative than to think about some operation that one can only see to be associative after a long unclear slog. Monoids are nice and magmas are not.

--------

For proving the injectivity on approach B above, using the AF + BG theorem:

First of all, observe the following:

Fix some set of variables throughout the following.

If P is a projective point, then we can define a ring O_P, whose elements are rational functions in these variables with homogenous numerators and denominators of the same degree, with the denominator being nonzero at the point P.

There is a ring homomorphism from this to scalars which just evaluates functions at the point P. The kernel of this homomorphism is an ideal we can call K. Note that an element of O_P is invertible if and only it is not in K.

If C is a homogenous polynomial in our variables (such that P is a root of C?), then we can consider O_P mod C, meaning O_P modulo all those values in O_P which can be expressed using a numerator divisible by C. Our ring homomorphism remains well-defined on O_P mod C, presuming P is a root of C. Let us re-use the name K for the kernel of this homomorphism and (I think? I'm writing late at night...) again, an element of O_P mod C is invertible if and only if it is not in this K.

Suppose C is irreducible. Then O_P mod C is an integral domain.

Furthermore suppose C has a nonzero gradient at P. Let top be a degree 1 polynomial which is not the one corresponding to the gradient of C at P, and let bottom be a degree 1 polynomial which is nonzero at P. Then K is the principal ideal generated by x = top/bottom (to be proven).

Then any particular element has at most one expression of the form x^n * an invertible value with a finite n. We can define the partial function which assigns the value n to each element of this form. This partial function turns multiplications into additions.

Given two curves C and D defined by homogenous polynomials, and a point P at which the gradient of C is nonzero, we define the intersection multiplicity of C and D at P to be the value of the above function on D in the ring O_P mod C. This is equivalently the number of ideals in O_P mod C mod D. This last characterization shows the symmetry of this definition with respect to C and D (in those cases where C and D both have nonzero gradients at P; note, though, that we can apply the definition in terms of O_P mod C even when only C has a nonzero gradient at P, and are stlil guaranteed that intersection multiplicities add as polynomials are multiplied)

Intersection multiplicity of C with D at any point clearly only depends on the value of D mod C; that is, it is unaffected by adding to D any multiple of C.

[To be continued...]

Define a symmetric relation "T intersects C1 more than C2 intersects C1 at point P" by "There is a multiple of T which is a linear combination of C1 and C2, and the value T is multiplied by is a homogenous polynomial which is nonzero at P".

-----------------